<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Login</title>
<style>
  body{font-family:Arial,system-ui;display:flex;align-items:center;justify-content:center;
    min-height:100vh;margin:0;background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff}
  .card{background:rgba(255,255,255,0.06);padding:20px;border-radius:12px;width:360px;box-shadow:0 6px 18px rgba(0,0,0,0.25)}
  input{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.95);color:#111}
  button{width:100%;padding:10px;border-radius:8px;border:0;background:#2196f3;color:white;font-weight:700;cursor:pointer}
  a{color:#cfe8ff;font-size:14px;text-decoration:none}
</style>
</head>
<body>
  <div class="card">
    <h2 style="margin:0 0 10px 0;color:#fff">Login</h2>

    <input id="phone" placeholder="Phone number" />
    <input id="password" type="password" placeholder="Password" />
    <button id="loginBtn">Login</button>

    <div id="msg" style="margin-top:10px;color:#ffdede"></div>
    <p style="margin-top:12px;">Don’t have an account? <a href="register.html">Register here</a></p>
  </div>

<script>
const SHEETY_URL = "https://api.sheety.co/4a9868f3c5ce48f976e575a769b00f1c/users/users";

document.getElementById("loginBtn").addEventListener("click", async () => {
  const phone = document.getElementById("phone").value.trim();
  const password = document.getElementById("password").value.trim();
  const msg = document.getElementById("msg");

  if (!phone || !password) {
    msg.textContent = "Please enter both phone and password.";
    return;
  }

  msg.textContent = "Checking...";

  try {
    const res = await fetch(SHEETY_URL);
    const data = await res.json();
    const users = data.users || [];

    const user = users.find(u => u.phone === phone && u.password === password);

    if (user) {
      msg.style.color = "#b6f7c6";
      msg.textContent = "✅ Login successful!";
      // store session
      localStorage.setItem("loggedUser", phone);
      setTimeout(() => (window.location.href = "dashboard.html"), 1000);
    } else {
      msg.textContent = "Invalid number or password.";
    }
  } catch (err) {
    console.error(err);
    msg.textContent = "Network error — try again.";
  }
});
</script>
</body>
</html>
