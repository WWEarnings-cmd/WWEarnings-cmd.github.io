<script>
const API_URL = 'https://api.sheety.co/f7f2e9490f85889b2a23cbdcf031c17e/usersDb4/usersDb4';

async function loginUser() {
  const phone = document.getElementById("phone").value.trim();
  const password = document.getElementById("password").value.trim();

  if (!phone || !password) {
    alert("Please fill in both phone and password");
    return;
  }

  try {
    const res = await fetch(API_URL);
    if (!res.ok) {
      throw new Error(`Sheety returned ${res.status}`);
    }

    const data = await res.json();
    console.log("Fetched data:", data);

    const users = data.usersDb4 || [];
    const found = users.find(
      user => user.phone === phone && user.password === password
    );

    if (found) {
      alert("Login successful!");
      // You can redirect here later if you want:
      // window.location.href = "dashboard.html";
    } else {
      alert("Invalid phone or password");
    }

  } catch (err) {
    console.error("Error during login:", err);
    alert("Login error. Please check console for details.");
  }
}
</script>
