<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WWEarnings Dashboard</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    body {
      background: #f4f8ff;
      color: #333;
    }

    header {
      background: linear-gradient(90deg, #0066ff, #0099ff);
      color: white;
      text-align: center;
      padding: 1.2rem 0;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header h1 {
      font-size: 1.3rem;
      font-weight: 600;
    }

    .balance-container {
      display: flex;
      justify-content: space-around;
      background: white;
      margin: 10px;
      border-radius: 10px;
      padding: 15px 0;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .balance-item {
      text-align: center;
    }

    .balance-item h2 {
      font-size: 1.2rem;
      color: #0066ff;
    }

    .balance-item p {
      font-size: 0.8rem;
      color: #666;
    }

    .cards {
      display: flex;
      justify-content: space-around;
      margin: 15px 10px;
    }

    .card {
      width: 48%;
      background: white;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      cursor: pointer;
    }

    .promo {
      background: white;
      margin: 10px;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .promo h2 {
      font-size: 1rem;
      font-weight: 700;
      color: #333;
    }

    .promo p {
      font-size: 0.85rem;
      color: #555;
      margin-top: 8px;
    }

    .recommended {
      margin: 10px;
      background: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .recommended h3 {
      margin-bottom: 10px;
      font-size: 1rem;
    }

    .task {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-top: 1px solid #eee;
    }

    .task:first-child {
      border-top: none;
    }

    .task button {
      background: #0066ff;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 5px 10px;
      cursor: pointer;
      font-size: 0.8rem;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: white;
      display: flex;
      justify-content: space-around;
      padding: 8px 0;
      box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
    }

    .bottom-nav div {
      text-align: center;
      font-size: 0.8rem;
      color: #555;
      cursor: pointer;
    }

    .bottom-nav div.active {
      color: #0066ff;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <header>
    <h1>WWEarnings</h1>
  </header>

  <section class="balance-container">
    <div class="balance-item">
      <h2 id="balance">0</h2>
      <p>Account balance</p>
    </div>
    <div class="balance-item">
      <h2 id="todayEarnings">0</h2>
      <p>Today's earnings</p>
    </div>
    <div class="balance-item">
      <h2 id="promoIncome">0</h2>
      <p>Promotion income</p>
    </div>
  </section>

  <section class="cards">
    <div class="card">
      üéØ Lucky Wheel
    </div>
    <div class="card">
      üóìÔ∏è Sign in Calendar
    </div>
  </section>

  <section class="promo">
    <h2>üíº WWEarnings</h2>
    <p>Turn your WhatsApp into a passive income stream! Keep it active and get paid daily without work or investment.</p>
    <p>‚úÖ 100% Free to Start<br>üí∞ Guaranteed Payments<br>üõ°Ô∏è Safe & Legal</p>
  </section>

  <section class="recommended">
    <h3>Recommended Tasks</h3>
    <div class="task">
      <span>Automatic scoring task No.1</span>
      <button>Start task</button>
    </div>
    <div class="task">
      <span>Simple WhatsApp engagement task</span>
      <button>Start task</button>
    </div>
    <div class="task">
      <span>Referral bonus mission</span>
      <button>Start task</button>
    </div>
  </section>

  <div class="bottom-nav">
    <div class="active">üè†<br>Home</div>
    <div>üéÅ<br>Promotion</div>
    <div>üí∞<br>Task</div>
    <div>üõ†Ô∏è<br>Service</div>
    <div>üë§<br>Account</div>
  </div>

  <script>
    // Replace with your real Sheety URL
    const SHEETY_URL = "https://api.sheety.co/xxxxxxxxxxxxxx/wwearnings/users";

    const loggedInPhone = localStorage.getItem("loggedInPhone");

    async function loadDashboard() {
      if (!loggedInPhone) {
        alert("Please log in first!");
        window.location.href = "login.html";
        return;
      }

      try {
        const res = await fetch(SHEETY_URL);
        const data = await res.json();

        const users = data.users || data.sheet1 || [];
        const user = users.find(u => u.phone == loggedInPhone);

        if (!user) {
          alert("User not found.");
          window.location.href = "login.html";
          return;
        }

        // Fill in dashboard info
        document.getElementById("balance").textContent = user.balance || "0";
        document.getElementById("todayEarnings").textContent = user.todayEarnings || "0";
        document.getElementById("promoIncome").textContent = user.promotionIncome || "0";

      } catch (err) {
        console.error(err);
        alert("Error loading dashboard data.");
      }
    }

    loadDashboard();
  </script>
</body>
</html>
